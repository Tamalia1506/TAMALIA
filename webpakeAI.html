<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TALIA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        body {
            background-image: url('./nama-foto.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            min-height: 100vh;
            overflow-y: auto;
            padding-top: 80px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        h1 {
            text-align: center;
            color: #1a73e8;
        }

        .upload-section {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .upload-btn {
            background-color: #1a73e8;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 0;
        }

        .upload-btn:hover {
            background-color: #1557b0;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            height: auto;
            overflow: visible;
        }

        .media-item {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .media-item img, 
        .media-item video {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
        }

        .media-info {
            margin-top: 10px;
        }

        .media-info h3 {
            font-size: 16px;
            color: #333;
            margin-bottom: 5px;
        }

        .media-info p {
            font-size: 14px;
            color: #666;
        }

        .delete-btn {
            background-color: #dc3545;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            margin-top: 5px;
        }

        .delete-btn:hover {
            background-color: #c82333;
        }

        .filter-section {
            margin-bottom: 20px;
        }

        .filter-btn {
            background-color: #ffffff;
            border: 1px solid #1a73e8;
            color: #1a73e8;
            padding: 5px 15px;
            margin-right: 10px;
            border-radius: 20px;
            cursor: pointer;
        }

        .filter-btn.active {
            background-color: #1a73e8;
            color: white;
        }

        /* Navbar styles */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #1a73e8;
        }

        .nav-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .profile-pic {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        /* Main content styles */
        .main-content {
            margin-top: 0;
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding: 20px;
            min-height: calc(100vh - 80px);
            position: relative;
            overflow: visible;
        }

        .profile-section {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            padding: 20px;
            border-radius: 10px;
            position: sticky;
            top: 100px;
            height: fit-content;
            max-height: calc(100vh - 100px);
            overflow-y: auto;
        }

        .media-item {
            margin-bottom: 20px;
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .post-header img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        .post-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 10px 0;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
        }

        .action-btn {
            flex: 1;
            min-width: 70px;
            justify-content: center;
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px;
            font-size: 14px;
        }

        .action-btn:hover {
            color: #1a73e8;
        }

        .comments-section {
            margin-top: 10px;
        }

        .comment {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .comment-input {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .comment-input input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 20px;
        }

        /* Stories section */
        .stories {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
            margin-bottom: 20px;
        }

        .story {
            width: 70px;
            text-align: center;
        }

        .story-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid #1a73e8;
            padding: 2px;
        }

        .story p {
            font-size: 12px;
            margin-top: 5px;
        }

        /* Settings Dropdown Styles */
        .settings-dropdown {
            position: relative;
            display: inline-block;
        }

        .settings-btn {
            background: none;
            border: none;
            color: #1a73e8;
            cursor: pointer;
            padding: 8px;
            font-size: 20px;
        }

        .settings-btn:hover {
            color: #1557b0;
        }

        .settings-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            min-width: 250px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 10px;
            padding: 15px;
            z-index: 1000;
            max-height: 80vh;
            overflow-y: auto;
        }

        .settings-dropdown:hover .settings-content {
            display: block;
        }

        .settings-section {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .settings-section:last-child {
            border-bottom: none;
        }

        .settings-section h4 {
            color: #666;
            margin-bottom: 10px;
        }

        .setting-item {
            margin: 10px 0;
        }

        .setting-item label {
            display: block;
            margin-bottom: 5px;
            color: #333;
        }

        .setting-btn {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            background: none;
            border: none;
            text-align: left;
            color: #333;
            cursor: pointer;
            border-radius: 5px;
        }

        .setting-btn:hover {
            background-color: #f0f0f0;
        }

        .setting-btn.logout {
            color: #dc3545;
        }

        /* Switch toggle untuk dark mode */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #1a73e8;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Tambahkan CSS untuk dark mode */
        .dark-mode {
            background-color: #1a1a1a;
        }
        
        .dark-mode .navbar,
        .dark-mode .profile-section,
        .dark-mode .upload-section,
        .dark-mode .media-item,
        .dark-mode .settings-content {
            background-color: rgba(40, 40, 40, 0.9);
            color: #fff;
        }
        
        .dark-mode .logo,
        .dark-mode h2,
        .dark-mode h3,
        .dark-mode .nav-profile span {
            color: #fff;
        }
        
        .dark-mode .action-btn {
            color: #fff;
        }
        
        .dark-mode .setting-btn {
            color: #fff;
        }
        
        .dark-mode .setting-btn:hover {
            background-color: #333;
        }

        .setting-item input[type="file"] {
            margin: 10px 0;
            width: 100%;
        }

        .profile-pic {
            object-fit: cover;
            transition: all 0.3s ease;
        }

        .profile-pic:hover {
            opacity: 0.8;
        }

        /* Tambahkan CSS untuk suggested users */
        .suggested-user {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-info div {
            font-size: 14px;
        }

        .user-info p {
            color: #666;
            font-size: 12px;
        }

        .follow-btn {
            background-color: #1a73e8;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .follow-btn:hover {
            background-color: #1557b0;
        }

        .following-btn {
            background-color: #e8e8e8;
            color: #333;
        }

        .nav-menu {
            display: flex;
            gap: 20px;
            margin-left: 40px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .nav-link:hover, .nav-link.active {
            background-color: #f0f0f0;
            color: #1a73e8;
        }

        .nav-link i {
            font-size: 18px;
        }

        .upload-area {
            border: 2px dashed #1a73e8;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 0;
        }

        .upload-area:hover {
            background-color: rgba(26, 115, 232, 0.1);
        }

        .upload-area i {
            font-size: 48px;
            color: #1a73e8;
            margin-bottom: 10px;
        }

        .upload-area p {
            font-size: 18px;
            color: #333;
            margin: 10px 0;
        }

        .upload-area span {
            font-size: 14px;
            color: #666;
        }

        .preview-area {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
        }

        .preview-item {
            position: relative;
            width: 100px;
            height: 100px;
        }

        .preview-item img, 
        .preview-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 5px;
        }

        .preview-remove {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .upload-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            background: linear-gradient(45deg, #1a73e8, #64b5f6);
            font-size: 16px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: transform 0.2s ease;
        }

        .upload-btn:hover {
            transform: translateY(-2px);
        }

        /* Profile page styles */
        .profile-page {
            margin-top: 0;
            padding: 20px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
            overflow-y: auto;
            height: calc(100vh - 80px);
        }

        .profile-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .profile-header .profile-pic {
            width: 150px;
            height: 150px;
            margin-bottom: 20px;
        }

        .profile-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 20px 0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #1a73e8;
        }

        .stat-label {
            color: #666;
        }

        .profile-bio {
            max-width: 500px;
            margin: 0 auto;
            text-align: center;
        }

        .edit-profile-btn {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            font-size: 16px;
        }

        .posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1001;
            overflow-y: auto;
            padding: 20px 0;
        }

        .modal-content {
            background: white;
            margin: 20px auto;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            border-radius: 10px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 10px;
            font-size: 28px;
            cursor: pointer;
        }

        .form-group {
            margin: 15px 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #666;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .form-group textarea {
            height: 100px;
            resize: vertical;
        }

        .profile-pic-edit {
            text-align: center;
            position: relative;
        }

        #preview-profile-pic {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 10px;
        }

        #edit-profile-pic {
            display: none;
        }

        .change-pic-btn {
            background: #1a73e8;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .save-profile-btn {
            width: 100%;
            background: #1a73e8;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }

        /* Tambahkan style untuk container utama */
        .page-container {
            min-height: 100vh;
            padding-bottom: 50px;
            position: relative;
        }

        .feed {
            overflow: visible;
            height: auto;
            padding-bottom: 50px;
        }

        .settings-profile-pic {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
        }

        .setting-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
        }

        .setting-stats {
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .setting-stats p {
            margin: 5px 0;
        }

        .setting-stats i {
            width: 20px;
            color: #1a73e8;
        }

        .setting-preview {
            margin: 10px 0;
        }

        .setting-preview img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
        }

        /* Perbaikan tampilan post-actions */
        .post-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 10px 0;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
        }

        .action-btn {
            flex: 1;
            min-width: 70px;
            justify-content: center;
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px;
            font-size: 14px;
        }

        /* Perbaikan tampilan teks di mode gelap */
        .dark-mode .media-item {
            background-color: rgba(40, 40, 40, 0.9);
        }

        .dark-mode .media-info h3,
        .dark-mode .media-info p,
        .dark-mode .comment-input input,
        .dark-mode .post-header strong,
        .dark-mode .post-header p,
        .dark-mode .comment strong,
        .dark-mode .comment p,
        .dark-mode .comment small {
            color: #fff;
        }

        .dark-mode .comment-input input {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            color: #fff;
        }

        .dark-mode .post-actions {
            border-color: rgba(255, 255, 255, 0.1);
        }

        .dark-mode .action-btn {
            color: #fff;
        }

        .dark-mode .action-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }

        /* Perbaikan tampilan teks di settings */
        .dark-mode .settings-content {
            background-color: rgba(40, 40, 40, 0.95);
        }

        .dark-mode .setting-item label,
        .dark-mode .settings-section h4,
        .dark-mode .setting-info p,
        .dark-mode .setting-stats p {
            color: #fff;
        }

        .dark-mode .setting-stats {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Perbaikan tampilan modal di mode gelap */
        .dark-mode .modal-content {
            background-color: #2d2d2d;
        }

        .dark-mode .form-group label,
        .dark-mode .form-group input,
        .dark-mode .form-group textarea {
            color: #fff;
        }

        .dark-mode .form-group input,
        .dark-mode .form-group textarea {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }

        /* Perbaikan tampilan tombol di mode gelap */
        .dark-mode .upload-btn {
            background: linear-gradient(45deg, #2196F3, #64b5f6);
        }

        .dark-mode .follow-btn {
            background-color: #2196F3;
        }

        .dark-mode .following-btn {
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        /* Tambahkan smooth scroll */
        * {
            scroll-behavior: smooth;
        }

        /* Styling scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* Dark mode scrollbar */
        .dark-mode ::-webkit-scrollbar-track {
            background: #333;
        }

        .dark-mode ::-webkit-scrollbar-thumb {
            background: #666;
        }

        .dark-mode ::-webkit-scrollbar-thumb:hover {
            background: #888;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">TALIA</div>
            <div class="nav-menu">
                <a href="#" class="nav-link active" onclick="showHome()">
                    <i class="fas fa-home"></i>
                    <span>Beranda</span>
                </a>
                <a href="#" class="nav-link" onclick="showProfile()">
                    <i class="fas fa-user"></i>
                    <span>Profil</span>
                </a>
            </div>
            <div class="nav-profile">
                <img src="default-profile.jpg" alt="Profile" class="profile-pic">
                <span>John Doe</span>
                <div class="settings-dropdown">
                    <button class="settings-btn">
                        <i class="fas fa-cog"></i>
                    </button>
                    <div class="settings-content">
                        <div class="settings-section">
                            <h4>Profil</h4>
                            <div class="setting-info">
                                <img src="${settings.profile.avatar}" alt="Profile" class="settings-profile-pic">
                                <div>
                                    <p><strong>${settings.profile.name}</strong></p>
                                    <p>${settings.profile.username}</p>
                                </div>
                            </div>
                            <button class="setting-btn" onclick="showEditProfileModal()">
                                <i class="fas fa-user-edit"></i> Edit Profil
                            </button>
                        </div>

                        <div class="settings-section">
                            <h4>Statistik Akun</h4>
                            <div class="setting-stats">
                                <p><i class="fas fa-photo-video"></i> Posts: <span id="settings-posts">0</span></p>
                                <p><i class="fas fa-users"></i> Followers: <span id="settings-followers">0</span></p>
                                <p><i class="fas fa-user-friends"></i> Following: <span id="settings-following">0</span></p>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h4>Tampilan</h4>
                            <div class="setting-item">
                                <label>Background</label>
                                <div class="setting-preview">
                                    <img src="${settings.background || 'default-bg.jpg'}" alt="Background" id="bg-preview">
                                    <input type="file" id="bgInput" accept="image/*" onchange="previewBackground(this)">
                                    <button class="setting-btn" onclick="changeBackground()">Ubah Background</button>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label>Mode Gelap</label>
                                <label class="switch">
                                    <input type="checkbox" onchange="toggleDarkMode()" ${settings.darkMode ? 'checked' : ''}>
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h4>Privasi</h4>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" onchange="togglePrivacy('isPrivate')" ${settings.privacy.isPrivate ? 'checked' : ''}>
                                    Akun Private
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" onchange="togglePrivacy('showFollowers')" ${settings.privacy.showFollowers ? 'checked' : ''}>
                                    Tampilkan Followers
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <!-- Profile Section -->
        <div class="profile-section">
            <img src="default-profile.jpg" alt="Profile" class="profile-pic">
            <h2 id="sidebar-name">John Doe</h2>
            <p id="sidebar-username">@johndoe</p>
            <p id="sidebar-bio">Bio: Love sharing moments!</p>
            <div class="sidebar-stats" style="margin-top: 20px;">
                <p><strong>Posts:</strong> <span id="sidebar-posts">0</span></p>
                <p><strong>Followers:</strong> <span id="sidebar-followers">0</span></p>
                <p><strong>Following:</strong> <span id="sidebar-following">0</span></p>
            </div>
        </div>

        <!-- Main Feed -->
        <div class="feed">
            <!-- Stories -->
            <div class="stories">
                <div class="story">
                    <img src="default-profile.jpg" alt="Story" class="story-img">
                    <p>Your Story</p>
                </div>
                <!-- Add more stories here -->
            </div>

            <!-- Upload Section -->
            <div class="upload-section">
                <h2>Buat Post Baru</h2>
                <div class="upload-area" onclick="document.getElementById('mediaInput').click()">
                    <input type="file" id="mediaInput" accept="image/*,video/*" multiple hidden>
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Klik atau seret file ke sini</p>
                    <span>Mendukung foto dan video</span>
                </div>
                <div id="preview-area" class="preview-area"></div>
                <button class="upload-btn" onclick="uploadMedia()">
                    <i class="fas fa-paper-plane"></i>
                    Unggah
                </button>
            </div>

            <!-- Posts -->
            <div class="gallery" id="mediaGallery">
                <!-- Posts will be added here -->
            </div>
        </div>

        <!-- Suggestions Section -->
        <div class="profile-section">
            <h3>Suggested for you</h3>
            <!-- Add suggested profiles here -->
        </div>
    </div>

    <!-- Tambahkan div profile-page setelah div main-content -->
    <div class="profile-page" style="display: none;">
        <div class="profile-header">
            <img src="default-profile.jpg" alt="Profile" class="profile-pic">
            <h1 id="profile-name">John Doe</h1>
            <p id="profile-username">@johndoe</p>
            <p id="profile-bio" class="profile-bio">Love sharing moments!</p>
            
            <div class="profile-stats">
                <div class="stat-item">
                    <div class="stat-number" id="posts-count">0</div>
                    <div class="stat-label">Posts</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="followers-count">0</div>
                    <div class="stat-label">Followers</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="following-count">0</div>
                    <div class="stat-label">Following</div>
                </div>
            </div>
            
            <button class="edit-profile-btn" onclick="showEditProfileModal()">
                <i class="fas fa-edit"></i> Edit Profile
            </button>
        </div>

        <div class="profile-posts">
            <div class="posts-grid" id="user-posts">
                <!-- Posts will be displayed here -->
            </div>
        </div>
    </div>

    <!-- Tambahkan modal edit profil -->
    <div id="edit-profile-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditProfileModal()">&times;</span>
            <h2>Edit Profile</h2>
            <div class="edit-profile-form">
                <div class="form-group">
                    <label>Foto Profil</label>
                    <div class="profile-pic-edit">
                        <img src="default-profile.jpg" alt="Profile" id="preview-profile-pic">
                        <input type="file" id="edit-profile-pic" accept="image/*" onchange="previewProfilePic(this)">
                        <label for="edit-profile-pic" class="change-pic-btn">
                            <i class="fas fa-camera"></i> Ubah Foto
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Nama</label>
                    <input type="text" id="edit-name" placeholder="Nama lengkap">
                </div>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="edit-username" placeholder="@username">
                </div>
                <div class="form-group">
                    <label>Bio</label>
                    <textarea id="edit-bio" placeholder="Ceritakan tentang dirimu"></textarea>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="edit-email" placeholder="email@example.com">
                </div>
                <div class="form-group">
                    <label>No. Telepon</label>
                    <input type="tel" id="edit-phone" placeholder="+62xxx">
                </div>
                <button class="save-profile-btn" onclick="saveProfile()">Simpan Perubahan</button>
            </div>
        </div>
    </div>

    <script>
        // Inisialisasi data dari localStorage
        let mediaFiles = JSON.parse(localStorage.getItem('mediaFiles')) || [];
        let settings = JSON.parse(localStorage.getItem('settings')) || {
            darkMode: false,
            background: null,
            profile: {
                name: 'John Doe',
                username: '@johndoe',
                bio: 'Love sharing moments!',
                avatar: 'default-profile.jpg',
                followers: [], // Array untuk menyimpan ID followers
                following: []  // Array untuk menyimpan ID yang difollow
            },
            privacy: {
                isPrivate: false,
                showFollowers: true,
                showActivity: true
            }
        };

        // Tambahkan array untuk menyimpan data users
        let users = JSON.parse(localStorage.getItem('users')) || [
            {
                id: 1,
                name: 'Jane Smith',
                username: '@janesmith',
                avatar: 'default-profile.jpg',
                bio: 'Photography lover'
            },
            {
                id: 2,
                name: 'Mike Johnson',
                username: '@mikej',
                avatar: 'default-profile.jpg',
                bio: 'Travel enthusiast'
            },
            // Tambahkan user lain sesuai kebutuhan
        ];

        // Fungsi untuk menyimpan data ke localStorage
        function saveToStorage() {
            localStorage.setItem('mediaFiles', JSON.stringify(mediaFiles));
            localStorage.setItem('settings', JSON.stringify(settings));
            localStorage.setItem('users', JSON.stringify(users));
        }

        // Fungsi untuk menerapkan settings yang tersimpan
        function applySettings() {
            // Terapkan dark mode
            if (settings.darkMode) {
                document.body.classList.add('dark-mode');
                document.querySelector('.switch input').checked = true;
            }

            // Terapkan background
            if (settings.background) {
                document.body.style.backgroundImage = `url('${settings.background}')`;
            }

            // Terapkan profil
            document.querySelectorAll('.profile-pic').forEach(pic => {
                pic.src = settings.profile.avatar;
            });
            document.querySelector('.nav-profile span').textContent = settings.profile.name;
            document.querySelector('.profile-section h2').textContent = settings.profile.name;
            document.querySelector('.profile-section p').textContent = settings.profile.username;
        }

        // Modifikasi fungsi uploadMedia
        function uploadMedia() {
            const input = document.getElementById('mediaInput');
            const files = input.files;

            for (let file of files) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const mediaItem = {
                        id: Date.now(),
                        type: file.type.startsWith('image/') ? 'image' : 'video',
                        name: file.name,
                        url: e.target.result,
                        date: new Date().toLocaleDateString(),
                        likes: 0,
                        isLiked: false,
                        comments: [],
                        author: {
                            name: settings.profile.name,
                            username: settings.profile.username,
                            avatar: settings.profile.avatar
                        }
                    };
                    mediaFiles.push(mediaItem);
                    saveToStorage();
                    displayMedia();
                }
                reader.readAsDataURL(file);
            }
            input.value = '';
        }

        // Modifikasi fungsi changeBackground
        function changeBackground() {
            const input = document.getElementById('bgInput');
            const file = input.files[0];
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    settings.background = e.target.result;
                    document.body.style.backgroundImage = `url('${e.target.result}')`;
                    saveToStorage();
                }
                reader.readAsDataURL(file);
            }
            input.value = '';
        }

        // Modifikasi fungsi toggleDarkMode
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            settings.darkMode = document.body.classList.contains('dark-mode');
            saveToStorage();
        }

        // Fungsi untuk edit profil
        function editProfile() {
            const name = prompt('Masukkan nama baru:', settings.profile.name);
            const username = prompt('Masukkan username baru:', settings.profile.username);
            const bio = prompt('Masukkan bio baru:', settings.profile.bio);
            
            if (name && username && bio) {
                settings.profile.name = name;
                settings.profile.username = username;
                settings.profile.bio = bio;
                saveToStorage();
                applySettings();
            }
        }

        // Fungsi untuk mengubah password
        function changePassword() {
            const oldPass = prompt('Masukkan password lama:');
            const newPass = prompt('Masukkan password baru:');
            const confirmPass = prompt('Konfirmasi password baru:');

            if (newPass === confirmPass) {
                // Di sini seharusnya ada validasi password lama
                settings.password = newPass;
                saveToStorage();
                alert('Password berhasil diubah!');
            } else {
                alert('Password tidak cocok!');
            }
        }

        // Fungsi untuk pengaturan privasi
        function privacySettings() {
            const isPrivate = confirm('Jadikan akun private?');
            const showFollowers = confirm('Tampilkan jumlah followers?');
            const showActivity = confirm('Tampilkan aktivitas?');

            settings.privacy = {
                isPrivate,
                showFollowers,
                showActivity
            };
            saveToStorage();
            alert('Pengaturan privasi berhasil disimpan!');
        }

        // Fungsi untuk mengubah foto profil
        function changeProfilePic() {
            const input = document.getElementById('profilePicInput');
            const file = input.files[0];
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // Update foto profil di settings
                    settings.profile.avatar = e.target.result;
                    
                    // Update semua elemen foto profil di halaman
                    document.querySelectorAll('.profile-pic').forEach(pic => {
                        pic.src = e.target.result;
                    });
                    
                    // Update foto profil di semua komentar yang ada
                    mediaFiles.forEach(post => {
                        if (post.comments) {
                            post.comments.forEach(comment => {
                                if (comment.user === settings.profile.name) {
                                    comment.avatar = e.target.result;
                                }
                            });
                        }
                    });

                    // Update foto profil di author setiap post
                    mediaFiles.forEach(post => {
                        if (post.author && post.author.name === settings.profile.name) {
                            post.author.avatar = e.target.result;
                        }
                    });
                    
                    saveToStorage();
                    displayMedia();
                    alert('Foto profil berhasil diubah!');
                }
                reader.readAsDataURL(file);
            }
            input.value = '';
        }

        // Fungsi untuk menambah komentar
        function addComment(postId, commentText) {
            if (!commentText.trim()) return;
            
            const post = mediaFiles.find(item => item.id === postId);
            if (post) {
                if (!post.comments) post.comments = [];
                post.comments.push({
                    id: Date.now(),
                    text: commentText,
                    user: settings.profile.name,
                    avatar: settings.profile.avatar,
                    date: new Date().toLocaleDateString()
                });
                saveToStorage();
                displayMedia();
                document.getElementById(`comment-input-${postId}`).value = '';
            }
        }

        // Fungsi untuk like post
        function toggleLike(button, postId) {
            const post = mediaFiles.find(item => item.id === postId);
            if (post) {
                post.isLiked = !post.isLiked;
                post.likes = post.isLiked ? post.likes + 1 : post.likes - 1;
                saveToStorage();
                displayMedia();
            }
        }

        // Tambahkan fungsi untuk toggle comments
        function toggleComments(postId) {
            const commentsSection = document.getElementById(`comments-${postId}`);
            commentsSection.style.display = commentsSection.style.display === 'none' ? 'block' : 'none';
        }

        // Modifikasi fungsi displayMedia untuk menampilkan likes dan comments
        function displayMedia(filterType = 'all') {
            const gallery = document.getElementById('mediaGallery');
            gallery.innerHTML = '';

            const filteredMedia = filterType === 'all' 
                ? mediaFiles 
                : mediaFiles.filter(item => item.type === filterType);

            // Update stats di profil
            document.querySelector('.profile-section div p:nth-child(1)').textContent = 
                `Posts: ${mediaFiles.length}`;

            filteredMedia.forEach(item => {
                const mediaElement = document.createElement('div');
                mediaElement.className = 'media-item';
                
                mediaElement.innerHTML = `
                    <div class="post-header">
                        <img src="${item.author ? item.author.avatar : settings.profile.avatar}" alt="Profile">
                        <div>
                            <strong>${item.author ? item.author.name : settings.profile.name}</strong>
                            <p style="font-size: 12px; color: #666;">${item.author ? item.author.username : settings.profile.username}</p>
                            <p style="font-size: 12px; color: #666;">${item.date}</p>
                        </div>
                    </div>
                    ${item.type === 'image' 
                        ? `<img src="${item.url}" alt="${item.name}">`
                        : `<video src="${item.url}" controls></video>`
                    }
                    <div class="post-actions">
                        <button class="action-btn" onclick="toggleLike(this, ${item.id})">
                            <i class="${item.isLiked ? 'fas' : 'far'} fa-heart ${item.isLiked ? 'text-danger' : ''}"></i>
                            <span>Like (${item.likes})</span>
                        </button>
                        <button class="action-btn" onclick="toggleComments(${item.id})">
                            <i class="far fa-comment"></i>
                            <span>Comment (${item.comments ? item.comments.length : 0})</span>
                        </button>
                        <button class="action-btn" onclick="downloadMedia('${item.url}', '${item.name}', '${item.type}')">
                            <i class="fas fa-download"></i>
                            <span>Download</span>
                        </button>
                        <button class="action-btn">
                            <i class="far fa-share-square"></i>
                            <span>Share</span>
                        </button>
                    </div>
                    <div class="comments-section" id="comments-${item.id}">
                        ${item.comments ? item.comments.map(comment => `
                            <div class="comment">
                                <img src="${comment.avatar || settings.profile.avatar}" alt="Profile" class="profile-pic" style="width: 32px; height: 32px;">
                                <div>
                                    <strong>${comment.user}</strong>
                                    <p>${comment.text}</p>
                                    <small style="color: #666;">${comment.date}</small>
                                </div>
                            </div>
                        `).join('') : ''}
                        <div class="comment-input">
                            <input type="text" placeholder="Add a comment..." id="comment-input-${item.id}">
                            <button class="upload-btn" onclick="addComment(${item.id}, document.getElementById('comment-input-${item.id}').value)">Post</button>
                        </div>
                    </div>
                `;
                
                gallery.appendChild(mediaElement);
            });
        }

        // Modifikasi fungsi displayMedia untuk menampilkan suggested users
        function displaySuggestedUsers() {
            const suggestedSection = document.querySelector('.profile-section:last-child');
            suggestedSection.innerHTML = `
                <h3>Suggested for you</h3>
                ${users.filter(user => !settings.profile.following.includes(user.id))
                    .map(user => `
                        <div class="suggested-user">
                            <div class="user-info">
                                <img src="${user.avatar}" alt="${user.name}" class="profile-pic" style="width: 32px; height: 32px;">
                                <div>
                                    <strong>${user.name}</strong>
                                    <p>${user.username}</p>
                                </div>
                            </div>
                            <button class="follow-btn" onclick="toggleFollow(${user.id})">Follow</button>
                        </div>
                    `).join('')}
            `;
        }

        // Fungsi untuk follow/unfollow user
        function toggleFollow(userId) {
            const followingIndex = settings.profile.following.indexOf(userId);
            if (followingIndex === -1) {
                // Follow user
                settings.profile.following.push(userId);
                // Update follower count di user yang difollow
                const user = users.find(u => u.id === userId);
                if (user && !user.followers) user.followers = [];
                user.followers.push(settings.profile.id);
            } else {
                // Unfollow user
                settings.profile.following.splice(followingIndex, 1);
                // Update follower count di user yang di-unfollow
                const user = users.find(u => u.id === userId);
                if (user && user.followers) {
                    const index = user.followers.indexOf(settings.profile.id);
                    if (index > -1) user.followers.splice(index, 1);
                }
            }
            
            saveToStorage();
            updateFollowStats();
            displaySuggestedUsers();
        }

        // Fungsi untuk update statistik follower/following
        function updateFollowStats() {
            const statsDiv = document.querySelector('.profile-section div');
            statsDiv.innerHTML = `
                <p><strong>Posts:</strong> ${mediaFiles.length}</p>
                <p><strong>Followers:</strong> ${settings.profile.followers.length}</p>
                <p><strong>Following:</strong> ${settings.profile.following.length}</p>
            `;
        }

        // Fungsi untuk menampilkan preview file yang akan diupload
        document.getElementById('mediaInput').addEventListener('change', function(e) {
            const previewArea = document.getElementById('preview-area');
            previewArea.innerHTML = '';
            
            Array.from(this.files).forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const div = document.createElement('div');
                    div.className = 'preview-item';
                    
                    if (file.type.startsWith('image/')) {
                        div.innerHTML = `
                            <img src="${e.target.result}" alt="Preview">
                            <button class="preview-remove" onclick="removePreview(${index})"></button>
                        `;
                    } else {
                        div.innerHTML = `
                            <video src="${e.target.result}" controls></video>
                            <button class="preview-remove" onclick="removePreview(${index})"></button>
                        `;
                    }
                    previewArea.appendChild(div);
                }
                reader.readAsDataURL(file);
            });
        });

        // Fungsi untuk menghapus preview
        function removePreview(index) {
            const input = document.getElementById('mediaInput');
            const dt = new DataTransfer();
            
            Array.from(input.files).forEach((file, i) => {
                if (i !== index) dt.items.add(file);
            });
            
            input.files = dt.files;
            document.querySelector(`.preview-item:nth-child(${index + 1})`).remove();
        }

        // Modifikasi fungsi showProfile
        function showProfile() {
            document.querySelector('.main-content').style.display = 'none';
            document.querySelector('.profile-page').style.display = 'block';
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            document.querySelector('.nav-link:nth-child(2)').classList.add('active');
            displayUserPosts();
            updateProfileStats();
        }

        // Modifikasi fungsi showHome
        function showHome() {
            document.querySelector('.main-content').style.display = 'grid';
            document.querySelector('.profile-page').style.display = 'none';
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            document.querySelector('.nav-link:first-child').classList.add('active');
            displayMedia(); // Refresh konten beranda
        }

        // Fungsi untuk menampilkan modal edit profil
        function showEditProfileModal() {
            const modal = document.getElementById('edit-profile-modal');
            modal.style.display = 'block';
            
            // Update semua field dengan data terkini
            document.getElementById('edit-name').value = settings.profile.name || '';
            document.getElementById('edit-username').value = settings.profile.username || '';
            document.getElementById('edit-bio').value = settings.profile.bio || '';
            document.getElementById('edit-email').value = settings.profile.email || '';
            document.getElementById('edit-phone').value = settings.profile.phone || '';
            document.getElementById('preview-profile-pic').src = settings.profile.avatar;

            // Tambahkan event listener untuk menutup modal dengan ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeEditProfileModal();
                }
            });

            // Tambahkan event listener untuk menutup modal ketika klik di luar
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeEditProfileModal();
                }
            });
        }

        // Fungsi untuk menutup modal
        function closeEditProfileModal() {
            document.getElementById('edit-profile-modal').style.display = 'none';
        }

        // Fungsi untuk preview foto profil
        function previewProfilePic(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('preview-profile-pic').src = e.target.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Modifikasi fungsi saveProfile
        function saveProfile() {
            const newSettings = {
                name: document.getElementById('edit-name').value,
                username: document.getElementById('edit-username').value,
                bio: document.getElementById('edit-bio').value,
                email: document.getElementById('edit-email').value,
                phone: document.getElementById('edit-phone').value,
                avatar: settings.profile.avatar
            };

            const profilePicInput = document.getElementById('edit-profile-pic');
            if (profilePicInput.files && profilePicInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    newSettings.avatar = e.target.result;
                    updateProfileSettings(newSettings);
                    closeEditProfileModal();
                }
                reader.readAsDataURL(profilePicInput.files[0]);
            } else {
                updateProfileSettings(newSettings);
                closeEditProfileModal();
            }
        }

        // Fungsi baru untuk update pengaturan profil
        function updateProfileSettings(newSettings) {
            // Update settings object
            settings.profile = {
                ...settings.profile,
                ...newSettings
            };

            // Update tampilan
            updateProfileDisplay();
            
            // Update posts yang sudah ada
            mediaFiles = mediaFiles.map(post => {
                if (post.author && post.author.name === settings.profile.name) {
                    post.author = {
                        name: newSettings.name,
                        username: newSettings.username,
                        avatar: newSettings.avatar
                    };
                }
                return post;
            });

            // Simpan perubahan
            saveToStorage();
            
            // Refresh tampilan
            displayMedia();
            displayUserPosts();
            
            // Tampilkan notifikasi
            alert('Profil berhasil diperbarui!');
        }

        // Modifikasi fungsi updateProfileDisplay
        function updateProfileDisplay() {
            // Update semua elemen yang menampilkan data profil
            const elements = {
                name: [
                    '.nav-profile span',
                    '#sidebar-name',
                    '#profile-name'
                ],
                username: [
                    '#sidebar-username',
                    '#profile-username'
                ],
                bio: [
                    '#sidebar-bio',
                    '#profile-bio'
                ]
            };

            // Update text content
            for (const [key, selectors] of Object.entries(elements)) {
                selectors.forEach(selector => {
                    const element = document.querySelector(selector);
                    if (element) {
                        let value = settings.profile[key];
                        if (key === 'bio') value = `Bio: ${value}`;
                        element.textContent = value;
                    }
                });
            }

            // Update avatar di semua tempat
            document.querySelectorAll('.profile-pic').forEach(pic => {
                pic.src = settings.profile.avatar;
            });

            // Update statistik
            updateProfileStats();
        }

        // Fungsi untuk menampilkan post user di profil
        function displayUserPosts() {
            const userPosts = document.getElementById('user-posts');
            userPosts.innerHTML = '';
            
            const posts = mediaFiles.filter(item => 
                item.author && item.author.name === settings.profile.name
            );

            posts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'profile-post-item';
                postElement.innerHTML = `
                    ${post.type === 'image' 
                        ? `<img src="${post.url}" alt="${post.name}">`
                        : `<video src="${post.url}"></video>`
                    }
                    <div class="post-overlay">
                        <div class="post-stats">
                            <span><i class="fas fa-heart"></i> ${post.likes}</span>
                            <span><i class="fas fa-comment"></i> ${post.comments ? post.comments.length : 0}</span>
                        </div>
                    </div>
                `;
                userPosts.appendChild(postElement);
            });
        }

        // Fungsi untuk update statistik profil
        function updateProfileStats() {
            const userPosts = mediaFiles.filter(item => 
                item.author && item.author.name === settings.profile.name
            ).length;

            document.getElementById('posts-count').textContent = userPosts;
            document.getElementById('followers-count').textContent = settings.profile.followers.length;
            document.getElementById('following-count').textContent = settings.profile.following.length;
        }

        // Fungsi untuk download media
        function downloadMedia(url, filename, type) {
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Fungsi untuk preview background
        function previewBackground(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('bg-preview').src = e.target.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Fungsi untuk toggle pengaturan privasi
        function togglePrivacy(setting) {
            settings.privacy[setting] = !settings.privacy[setting];
            saveToStorage();
            updateSettingsDisplay();
        }

        // Fungsi untuk update tampilan settings
        function updateSettingsDisplay() {
            // Update statistik
            document.getElementById('settings-posts').textContent = mediaFiles.filter(item => 
                item.author && item.author.name === settings.profile.name
            ).length;
            document.getElementById('settings-followers').textContent = settings.profile.followers.length;
            document.getElementById('settings-following').textContent = settings.profile.following.length;

            // Update checkbox privasi
            document.querySelectorAll('.settings-section input[type="checkbox"]').forEach(checkbox => {
                const setting = checkbox.getAttribute('onchange').match(/togglePrivacy\('(.+)'\)/)[1];
                checkbox.checked = settings.privacy[setting];
            });

            // Update dark mode switch
            document.querySelector('.switch input').checked = settings.darkMode;

            // Update background preview
            if (settings.background) {
                document.getElementById('bg-preview').src = settings.background;
            }
        }

        // Jalankan saat halaman dimuat
        window.onload = function() {
            applySettings();
            displayMedia();
            displaySuggestedUsers();
            updateFollowStats();
            updateProfileDisplay();
            updateSettingsDisplay();
        }
    </script>
</body>
</html>
